<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novela Visual Pulida</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="menu-principal">
        <div class="titulo-juego">
            <h1>Monika Ya No Es Racista</h1>
        </div>
        <nav class="navegacion-menu">
            <button data-accion="nueva-partida">Nueva Partida</button>
            <button data-accion="cargar-partida">Cargar Partida</button>
            <button data-accion="opciones">Opciones</button>
            <button data-accion="salir">Salir</button>
        </nav>
    </div>

    <div id="pantalla-opciones" class="overlay oculta">
        <div class="menu-opciones">
            <h2>Opciones</h2>
            <div class="opcion">
                <label for="volumen-bgm">Música (BGM)</label>
                <input type="range" id="volumen-bgm" min="0" max="1" step="0.05" value="1">
            </div>
            <div class="opcion">
                <label for="volumen-sfx">Efectos (SFX)</label>
                <input type="range" id="volumen-sfx" min="0" max="1" step="0.05" value="1">
            </div>
            <div class="opcion">
                <label for="velocidad-texto">Velocidad del Texto (Más lento → Más rápido)</label>
                <input type="range" id="velocidad-texto" min="10" max="100" step="5" value="30">
            </div>
            <button id="opciones-boton-volver">Volver</button>
        </div>
    </div>

    <div id="superposicion-transicion"></div>

    <div id="pantalla-guardado" class="overlay oculta">
        <div class="menu-guardado">
            <h2 id="menu-guardado-titulo">Guardar / Cargar Partida</h2>
            <div id="slots-guardado" class="slots-container">
                </div>
            <button id="boton-cerrar-menu">Cerrar</button>
        </div>
    </div>

    <div id="juego-container" class="oculto">
        <div id="fondo"></div>
        
        <div id="contenedor-personajes">
            <img id="personaje-izquierda" class="personaje-sprite" alt="Personaje Izquierda">
            <img id="personaje-centro" class="personaje-sprite" alt="Personaje Centro">
            <img id="personaje-derecha" class="personaje-sprite" alt="Personaje Derecha">
        </div>

        <div id="ui-container">
            <div id="opciones-container"></div>
            <div id="cuadro-dialogo">
                <div id="nombre-personaje"></div>
                <p id="texto-dialogo"></p>
            </div>
        </div>
    </div>

   <div id="controles-juego" class="oculto">
    <button id="boton-guardar">Guardar</button>
    <button id="boton-cargar">Cargar</button>
    <button id="boton-opciones-juego">Opciones</button> 
    </div>

    <audio id="audio-bgm" loop></audio>
    <audio id="audio-sfx"></audio>

    <script src="src/motor.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const selectores = {
                fondo: '#fondo',
                // Actualizamos para apuntar al nuevo contenedor de personajes
                contenedorPersonajes: '#contenedor-personajes', 
                nombrePersonaje: '#nombre-personaje',
                textoDialogo: '#texto-dialogo',
                opcionesContainer: '#opciones-container',
                cuadroDialogo: '#cuadro-dialogo',
                // Añadimos selectores para los elementos de audio
                audioBGM: '#audio-bgm',
                audioSFX: '#audio-sfx',
                // --- NUEVO: Selectores para el sistema de guardado ---
                pantallaGuardado: '#pantalla-guardado',
                slotsContainer: '#slots-guardado',
                tituloMenuGuardado: '#menu-guardado-titulo',
                botonCerrarMenu: '#boton-cerrar-menu',
                botonGuardar: '#boton-guardar',
                botonCargar: '#boton-cargar',
                 // --- NUEVO: Selectores para Menús ---
                menuPrincipal: '#menu-principal',
                juegoContainer: '#juego-container',
                controlesJuego: '#controles-juego',
                pantallaOpciones: '#pantalla-opciones',
                // --- Selectores para Opciones ---
                sliderVolumenBGM: '#volumen-bgm',
                sliderVolumenSFX: '#volumen-sfx',
                sliderVelocidadTexto: '#velocidad-texto',
                botonVolverOpciones: '#opciones-boton-volver',
                botonOpcionesJuego: '#boton-opciones-juego'
            };
            const juego = new MotorNovelaVisual(selectores);
            // El motor ahora inicializa los menús en lugar de empezar el juego directamente
            juego.inicializar(); 
        });
    </script>

</body>
</html>